<div class="page">

  <h2 class="title">Product Management Dashboard</h2>

  <!-- ================= ADD PRODUCT ================= -->
  <div class="card form-card">
    <h3>Add Product</h3>

    <form [formGroup]="productForm" (ngSubmit)="onSubmit()" class="form">

      <div class="form-group">
        <label>Product Name</label>
        <input type="text" formControlName="name" placeholder="Enter product name">
      </div>

      <div class="form-group">
        <label>Price</label>
        <input type="number" formControlName="price" placeholder="Enter price">
      </div>

      <div class="form-group">
        <label>Category</label>
        <input type="text" formControlName="category" placeholder="Enter category">
      </div>

      <div class="form-actions">
        <button pButton type="submit" class="btn-primary">
          {{ isEditMode ? 'Update Product' : 'Add Product' }}
        </button>
      </div>

    </form>
  </div>

  <!-- ================= TABLE ================= -->
  <div class="card table-card">

    <p-table
      #dt
      [value]="products"
      [paginator]="true"
      [rows]="5"
      [globalFilterFields]="['name','category']"
      responsiveLayout="scroll">

      <!-- SEARCH -->
      <ng-template pTemplate="caption">
        <div class="table-header">
          <span class="search-box">
            <input
              type="text"
              placeholder="Search by name or category"
              (input)="dt.filterGlobal($any($event.target).value, 'contains')">
          </span>
        </div>
      </ng-template>

      <!-- HEADER -->
      <ng-template pTemplate="header">
        <tr>
          <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
          <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
          <th pSortableColumn="category">Category <p-sortIcon field="category"></p-sortIcon></th>
          <th class="actions-col">Actions</th>
        </tr>
      </ng-template>

      <!-- BODY -->
      <ng-template pTemplate="body" let-product let-i="rowIndex">
        <tr>
          <td>{{ product.name }}</td>
          <td>â‚¹ {{ product.price }}</td>
          <td>{{ product.category }}</td>
          <td class="actions-col">

            <button
              pButton
              type="button"
              class="btn-edit"
              (click)="onEdit(product, i)">
              Edit
            </button>

            <button
              pButton
              type="button"
              class="btn-delete"
              (click)="onDelete(i)">
              Delete
            </button>

          </td>
        </tr>
      </ng-template>

    </p-table>

  </div>

  <!-- ================= CHART ================= -->
<div class="card chart-card">
  <h3>Product Price Analysis</h3>

  <ngx-charts-bar-vertical
    [view]="view"
    [results]="chartData"
    [gradient]="gradient"
    [xAxis]="showXAxis"
    [yAxis]="showYAxis"
    [legend]="showLegend"
    [showXAxisLabel]="true"
    [showYAxisLabel]="true"
    [xAxisLabel]="xAxisLabel"
    [yAxisLabel]="yAxisLabel">
  </ngx-charts-bar-vertical>

</div>


</div>
